<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–≤–æ—î—ó —Å–ª—É–∂–±–∏</title>
    <style>
        :root {
            --pixel-blue: #0A3C59; /* –¢–µ–º–Ω–æ-—Å–∏–Ω—ñ–π –ø—ñ–∫—Å–µ–ª—å */
            --pixel-light: #527A8A; /* –°–≤—ñ—Ç–ª–æ-—Å–∏–Ω—ñ–π –ø—ñ–∫—Å–µ–ª—å */
            --pixel-accent: #FFD700; /* –ó–æ–ª–æ—Ç–∏–π –∞–∫—Ü–µ–Ω—Ç */
            --background-color: #f0f0f0;
            --text-color: #111;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            background-image: repeating-linear-gradient(45deg, 
                var(--pixel-blue) 0, var(--pixel-blue) 5px, 
                var(--pixel-light) 5px, var(--pixel-light) 10px);
            background-size: 40px 40px;
        }

        .container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 900px;
            min-height: 700px;
        }

        h1, h2, h3 {
            color: var(--pixel-blue);
            border-bottom: 3px solid var(--pixel-light);
            padding-bottom: 5px;
            margin-top: 25px;
        }
        
        /* –°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è —Ñ–æ—Ä–º–∏ */
        .form-group {
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        select, button, input[type="date"] {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border-radius: 4px;
            border: 1px solid #aaa;
            box-sizing: border-box;
            background-color: #fff;
            font-size: 16px;
        }

        button {
            background-color: var(--pixel-blue);
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #0056b3;
        }

        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            padding: 10px 0;
        }

        .checkbox-grid label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-weight: normal;
        }
        
        .checkbox-grid input[type="checkbox"] {
            margin-right: 8px;
            width: auto;
        }

        /* –°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è —Å–µ–∫—Ü—ñ—ó —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ (Battlefield 2 style) */
        #results {
            margin-top: 30px;
            padding: 20px;
            background-color: #eee;
            border: 5px solid var(--pixel-blue);
            border-radius: 8px;
            display: none;
        }
        
        .stat-block {
            background-color: var(--pixel-blue);
            color: white;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        /* –°—Ç–∏–ª—å –¥–ª—è –≤–µ–ª–∏–∫–æ–≥–æ –≤—ñ–¥–ª—ñ–∫—É —á–∞—Å—É */
        .stat-block.countdown {
            background-color: #A52A2A; /* –ß–µ—Ä–≤–æ–Ω–∏–π/–ë–æ—Ä–¥–æ–≤–∏–π –¥–ª—è —É–≤–∞–≥–∏ */
            flex-direction: column;
            text-align: center;
        }
        .stat-block.countdown strong {
            font-size: 2.5em;
            color: #fff;
            margin-top: 5px;
        }


        .stat-block strong {
            color: var(--pixel-accent);
            font-size: 1.2em;
        }

        .rank-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .rank-info img {
            width: 80px;
            height: 80px;
            object-fit: contain;
            border: 2px solid var(--pixel-accent);
            border-radius: 50%;
            padding: 5px;
            background-color: #fff;
        }

        .kkd-bar-container {
            width: 100%;
            background-color: #ccc;
            border-radius: 5px;
            margin-top: 10px;
        }

        .kkd-bar {
            height: 25px;
            background-color: var(--pixel-accent);
            border-radius: 5px;
            text-align: center;
            line-height: 25px;
            color: var(--pixel-blue);
            font-weight: bold;
            transition: width 1s ease-in-out;
            min-width: 10%; /* —â–æ–± –±—É–ª–æ –≤–∏–¥–Ω–æ —Ç–µ–∫—Å—Ç –Ω–∞–≤—ñ—Ç—å –ø—Ä–∏ –Ω–∏–∑—å–∫–æ–º—É –ö–ö–î */
        }
        
        .recommendation {
            background-color: #fff;
            border: 2px solid var(--pixel-accent);
            padding: 15px;
            margin-top: 20px;
            border-radius: 4px;
        }

        .next-rank-display {
            font-size: 1.1em;
            font-weight: bold;
            color: #008000;
        }
        
        .placeholder-image {
            width: 80px;
            height: 80px;
            background-color: #ccc;
            border: 2px solid var(--pixel-accent);
            border-radius: 50%;
            padding: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            text-align: center;
            line-height: 1.2;
            color: #555;
        }
        /* –°—Ç–∏–ª—å –¥–ª—è –ø—Ä–∏–º—ñ—Ç–æ–∫ —â–æ–¥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É */
        .contract-note {
            color: var(--pixel-accent);
            font-style: italic;
            font-size: 0.9em;
            margin-top: 5px;
        }

    </style>
</head>
<body>

<div class="container">
    <h1>‚öîÔ∏è –¢–≤–æ—è –æ—Å–æ–±–∏—Å—Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h1>

    <div id="form-section">
        <form id="analysisForm">

            <div class="form-group">
                <label for="serviceTime">1. –°–∫—ñ–ª—å–∫–∏ —Å–ª—É–∂–∏—à? (–î–ª—è –ø—ñ–¥–±–æ—Ä—É –∞—á—ñ–≤–∫–∏)</label>
                <select id="serviceTime" required></select>
            </div>

            <div class="form-group">
                <label for="rank">2. –¢–≤–æ—î –∑–≤–∞–Ω–Ω—è</label>
                <select id="rank" required></select>
            </div>
            
            <div class="form-group">
                <label for="position">3. –¢–≤–æ—è –ø–æ—Å–∞–¥–∞ –Ω–∞ –∫–∞—Ç–µ—Ä—ñ?</label>
                <select id="position" required></select>
            </div>

            <div class="form-group">
                <label>4. –Ø–∫—ñ —Ç–≤–æ—ó –Ω–∞–≤–∏—á–∫–∏?</label>
                <div id="skillsContainer" class="checkbox-grid">
                    </div>
                <small>–ö–æ–∂–Ω–∞ –æ–±—Ä–∞–Ω–∞ –Ω–∞–≤–∏—á–∫–∞ –ø—ñ–¥–≤–∏—â—É—î –ö–ö–î –Ω–∞ 16% (–ë–∞–∑–æ–≤–∏–π 10%)</small>
            </div>

            <div class="form-group">
                <label for="education">5. –Ø–∫–∞ –æ—Å–≤—ñ—Ç–∞?</label>
                <select id="education" required></select>
                <small>–û—Å–≤—ñ—Ç–∞ –≤–ø–ª–∏–≤–∞—î –Ω–∞ –ø–æ—Ç–µ–Ω—Ü—ñ–∞–ª –∑–≤–∞–Ω–Ω—è —Ç–∞ –ö–ö–î.</small>
            </div>
            
            <div class="form-group">
                <label for="contractDate">6. –î–∞—Ç–∞ –ø—ñ–¥–ø–∏—Å–∞–Ω–Ω—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É (–¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –¥–µ–º–æ–±—ñ–ª—ñ–∑–∞—Ü—ñ—ó)</label>
                <input type="date" id="contractDate" required>
                <small>–û–±–µ—Ä—ñ—Ç—å –¥–∞—Ç—É, –∫–æ–ª–∏ –±—É–ª–æ –ø—ñ–¥–ø–∏—Å–∞–Ω–æ –í–∞—à –æ—Å—Ç–∞–Ω–Ω—ñ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç (—á–∏ –º–æ–±—ñ–ª—ñ–∑–æ–≤–∞–Ω–æ).</small>
            </div>

            <button type="submit">–ê–ù–ê–õ–Ü–ó–£–í–ê–¢–ò –ü–û–î–í–ò–ì–ò</button>
        </form>
    </div>

    <div id="results">
        <h2>üìä –ü—Ä–æ—Ñ—ñ–ª—å —Ç–∞ —Ç–≤–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
        
        <h3>‚öì –ó–∞–ª–∏—à–∏–ª–æ—Å—å –¥–æ –∫—ñ–Ω—Ü—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É</h3>
        <div class="stat-block countdown">
            <span id="contractStatusLabel">–°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É:</span>
            <strong id="contractCountdown">--</strong>
            <span class="contract-note" id="contractNote"></span>
        </div>

        <h3>üìà –ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –∫–æ—Ä–∏—Å–Ω–æ—ó –¥—ñ—ó (–ö–ö–î)</h3>
        <div class="stat-block">
            <span>–ü–æ—Ç–æ—á–Ω–∏–π –ö–ö–î:</span> 
            <strong id="kkdValue">0%</strong>
        </div>
        <div class="kkd-bar-container">
            <div id="kkdBar" class="kkd-bar"></div>
        </div>

        <h3>üéñÔ∏è –ó–≤–∞–Ω–Ω—è —Ç–∞ –∫–∞—Ä'—î—Ä–Ω–∏–π —à–ª—è—Ö</h3>
        <div class="stat-block rank-info">
            <div>
                <p>–¢–≤–æ—î –∑–≤–∞–Ω–Ω—è:</p>
                <strong id="currentRankDisplay"></strong>
            </div>
            <div id="currentRankImage" class="placeholder-image">–§–æ—Ç–æ –∑–≤–∞–Ω–Ω—è</div>
            <div style="text-align: right;">
                <p>–ù–∞—Å—Ç—É–ø–Ω–µ –∑–≤–∞–Ω–Ω—è, –ø–æ—Ç–µ–Ω—Ü—ñ–∞–ª:</p>
                <div class="next-rank-display" id="nextRankDisplay"></div>
            </div>
        </div>
        
        <h3>üèÜ –¢–≤–æ—ó –ø–æ–¥–≤–∏–≥–∏ ("–∞—á—ñ–≤–∫–∏")</h3>
        <div class="stat-block">
            <div style="flex-direction: column; align-items: flex-start;">
                <strong id="achievementTitle"></strong>
                <small id="achievementDescription" style="color: #ccc; margin-top: 5px;"></small>
            </div>
        </div>
        
        <h3>üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó: </h3>
        <div class="recommendation" id="recommendations">
            <p><strong>–ü–æ–¥–∞–ª—å—à—ñ –¥—ñ—ó:</strong></p>
            <ul id="recommendationList">
                </ul>
        </div>
    </div>
</div>

<script>
    // –Ü–º—ñ—Ç–∞—Ü—ñ—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è db.json (–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–Ω—É –ø–æ–º–∏–ª–∫—É - –≤–∏–¥–∞–ª–µ–Ω–æ –ø–µ—Ä—à—É '{')
    const db = {
        "ranks": [
            {"id": 1, "title": "–ú–∞—Ç—Ä–æ—Å", "category": "–†—è–¥–æ–≤–∏–π", "next_rank_id": 2, "img": "images/matros.png"},
            {"id": 2, "title": "–°—Ç–∞—Ä—à–∏–π –º–∞—Ç—Ä–æ—Å", "category": "–†—è–¥–æ–≤–∏–π", "next_rank_id": 3, "img": "images/st_matros.png"},
            {"id": 3, "title": "–°—Ç–∞—Ä—à–∏–Ω–∞ 2 —Å—Ç–∞—Ç—Ç—ñ", "category": "–°–µ—Ä–∂–∞–Ω—Ç", "next_rank_id": 4, "img": "images/st_2.png"},
            {"id": 4, "title": "–°—Ç–∞—Ä—à–∏–Ω–∞ 1 —Å—Ç–∞—Ç—Ç—ñ", "category": "–°–µ—Ä–∂–∞–Ω—Ç", "next_rank_id": 5, "img": "images/st_1.png"},
            {"id": 5, "title": "–ì–æ–ª–æ–≤–Ω–∏–π —Å—Ç–∞—Ä—à–∏–Ω–∞", "category": "–°–µ—Ä–∂–∞–Ω—Ç", "next_rank_id": 6, "img": "images/gl_st.png"},
            {"id": 6, "title": "–ì–æ–ª–æ–≤–Ω–∏–π –∫–æ—Ä–∞–±–µ–ª—å–Ω–∏–π —Å—Ç–∞—Ä—à–∏–Ω–∞", "category": "–°—Ç–∞—Ä—à–∏–Ω–∞", "next_rank_id": 7, "img": "images/gl_kor_st.png"},
            {"id": 7, "title": "–®—Ç–∞–±-—Å—Ç–∞—Ä—à–∏–Ω–∞", "category": "–°—Ç–∞—Ä—à–∏–Ω–∞", "next_rank_id": 8, "img": "images/shtab_st.png"},
            {"id": 8, "title": "–ú–∞–π—Å—Ç–µ—Ä-—Å—Ç–∞—Ä—à–∏–Ω–∞", "category": "–°—Ç–∞—Ä—à–∏–Ω–∞", "next_rank_id": 9, "img": "images/mayster_st.png"},
            {"id": 9, "title": "–°—Ç–∞—Ä—à–∏–π –º–∞–π—Å—Ç–µ—Ä-—Å—Ç–∞—Ä—à–∏–Ω–∞", "category": "–°—Ç–∞—Ä—à–∏–Ω–∞", "next_rank_id": 10, "img": "images/st_mayster_st.png"},
            {"id": 10, "title": "–ì–æ–ª–æ–≤–Ω–∏–π –º–∞–π—Å—Ç–µ—Ä-—Å—Ç–∞—Ä—à–∏–Ω–∞", "category": "–°—Ç–∞—Ä—à–∏–Ω–∞", "next_rank_id": null, "img": "images/gl_mayster_st.png"},
            {"id": 11, "title": "–ú–æ–ª–æ–¥—à–∏–π –ª–µ–π—Ç–µ–Ω–∞–Ω—Ç", "category": "–ú–æ–ª–æ–¥—à–∏–π –æ—Ñ—ñ—Ü–µ—Ä", "next_rank_id": 12, "img": "images/ml_leyt.png"},
            {"id": 12, "title": "–õ–µ–π—Ç–µ–Ω–∞–Ω—Ç", "category": "–ú–æ–ª–æ–¥—à–∏–π –æ—Ñ—ñ—Ü–µ—Ä", "next_rank_id": 13, "img": "images/leyt.png"},
            {"id": 13, "title": "–°—Ç–∞—Ä—à–∏–π –ª–µ–π—Ç–µ–Ω–∞–Ω—Ç", "category": "–ú–æ–ª–æ–¥—à–∏–π –æ—Ñ—ñ—Ü–µ—Ä", "next_rank_id": 14, "img": "images/st_leyt.png"},
            {"id": 14, "title": "–ö–∞–ø—ñ—Ç–∞–Ω-–ª–µ–π—Ç–µ–Ω–∞–Ω—Ç", "category": "–ú–æ–ª–æ–¥—à–∏–π –æ—Ñ—ñ—Ü–µ—Ä", "next_rank_id": 15, "img": "images/kap_leyt.png"},
            {"id": 15, "title": "–ö–∞–ø—ñ—Ç–∞–Ω 3 —Ä–∞–Ω–≥—É", "category": "–°—Ç–∞—Ä—à–∏–π –æ—Ñ—ñ—Ü–µ—Ä", "next_rank_id": 16, "img": "images/kap_3.png"},
            {"id": 16, "title": "–ö–∞–ø—ñ—Ç–∞–Ω 2 —Ä–∞–Ω–≥—É", "category": "–°—Ç–∞—Ä—à–∏–π –æ—Ñ—ñ—Ü–µ—Ä", "next_rank_id": 17, "img": "images/kap_2.png"},
            {"id": 17, "title": "–ö–∞–ø—ñ—Ç–∞–Ω 1 —Ä–∞–Ω–≥—É", "category": "–°—Ç–∞—Ä—à–∏–π –æ—Ñ—ñ—Ü–µ—Ä", "next_rank_id": 18, "img": "images/kap_1.png"},
            {"id": 18, "title": "–ö–æ–º–º–æ–¥–æ—Ä", "category": "–í–∏—â–∏–π –æ—Ñ—ñ—Ü–µ—Ä", "next_rank_id": 19, "img": "images/commodor.png"},
            {"id": 19, "title": "–ö–æ–Ω—Ç—Ä-–∞–¥–º—ñ—Ä–∞–ª", "category": "–í–∏—â–∏–π –æ—Ñ—ñ—Ü–µ—Ä", "next_rank_id": 20, "img": "images/kontr_adm.png"},
            {"id": 20, "title": "–í—ñ—Ü–µ-–∞–¥–º—ñ—Ä–∞–ª", "category": "–í–∏—â–∏–π –æ—Ñ—ñ—Ü–µ—Ä", "next_rank_id": 21, "img": "images/vitse_adm.png"},
            {"id": 21, "title": "–ê–¥–º—ñ—Ä–∞–ª", "category": "–í–∏—â–∏–π –æ—Ñ—ñ—Ü–µ—Ä", "next_rank_id": null, "img": "images/admiral.png"}
        ],

        "service_time": [
            {"value": "1-11 –º—ñ—Å—è—Ü—ñ–≤", "display": "1-11 –º—ñ—Å—è—Ü—ñ–≤"},
            {"value": "1 —Ä—ñ–∫", "display": "1 —Ä—ñ–∫"},
            {"value": "2 —Ä–æ–∫–∏", "display": "2 —Ä–æ–∫–∏"},
            {"value": "3 —Ä–æ–∫–∏", "display": "3 —Ä–æ–∫–∏"},
            {"value": "4 —Ä–æ–∫–∏", "display": "4 —Ä–æ–∫–∏"},
            {"value": "5 —Ä–æ–∫—ñ–≤", "display": "5 —Ä–æ–∫—ñ–≤"},
            {"value": "6 —Ä–æ–∫—ñ–≤", "display": "6 —Ä–æ–∫—ñ–≤"},
            {"value": "7 —Ä–æ–∫—ñ–≤", "display": "7 —Ä–æ–∫—ñ–≤"},
            {"value": "8 —Ä–æ–∫—ñ–≤", "display": "8 —Ä–æ–∫—ñ–≤"},
            {"value": "9 —Ä–æ–∫—ñ–≤", "display": "9 —Ä–æ–∫—ñ–≤"},
            {"value": "10 —Ä–æ–∫—ñ–≤", "display": "10 —Ä–æ–∫—ñ–≤"},
            {"value": "11 —Ä–æ–∫—ñ–≤", "display": "11 —Ä–æ–∫—ñ–≤"},
            {"value": "12 —Ä–æ–∫—ñ–≤", "display": "12 —Ä–æ–∫—ñ–≤"},
            {"value": "–í –∞—Ä–º—ñ—ó –Ω–∞—Ä–æ–¥–∏–≤—Å—è", "display": "–í –∞—Ä–º—ñ—ó –Ω–∞—Ä–æ–¥–∏–≤—Å—è"}
        ],
        "positions": [
            "–°—Ç–∞—Ä—à–∏–Ω–∞ –ö–ë–£", "–ö–æ–º–∞–Ω–¥–∏—Ä –≤—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è —Ä—É–ª—å–æ–≤–∏—Ö —Å–∏–≥–Ω–∞–ª—å–Ω–∏–∫—ñ–≤", "–°—Ç–∞—Ä—à–∏–π —Ä—É–ª—å–æ–≤–∏–π —Å–∏–≥–Ω–∞–ª—å–Ω–∏–∫", "–†—É–ª—å–æ–≤–∏–π —Å–∏–≥–Ω–∞–ª—å–Ω–∏–∫", "–ö–æ–º–∞–Ω–¥–∏—Ä –≤—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤", "–°—Ç–∞—Ä—à–∏–π –æ–ø–µ—Ä–∞—Ç–æ—Ä", "–û–ø–µ—Ä–∞—Ç–æ—Ä –ö–ë–£", "–ö–æ–º–∞–Ω–¥–∏—Ä –≤—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è –∫–æ–º–µ–Ω–¥–æ—Ä—ñ–≤", "–ö–æ–º–µ–Ω–¥–æ—Ä", "–ö–ë–£", "–ë–æ—Ü–º–∞–Ω", "–ë–∞—Ç–∞–ª–µ—Ä", "–ú–∞—Ä—Å–æ–≤–∏–π", "–ï–ª–µ–∫—Ç—Ä–∏–∫", "–°—Ç–∞—Ä—à–∏–π –µ–ª–µ–∫—Ç—Ä–∏–∫", "–°—Ç–∞—Ä—à–∏–π –º–æ—Ç–æ—Ä–∏—Å—Ç", "–ú–æ—Ç–æ—Ä–∏—Å—Ç", "–ö–æ–º–∞–Ω–¥–∏—Ä –∫–∞—Ç–µ—Ä–∞", "–ü–æ–º—ñ—á–Ω–∏–∫ –∫–æ–º–∞–Ω–¥–∏—Ä–∞", "–°—Ç–∞—Ä—à–∏–Ω–∞ –ï–ú–ö"
        ],
        "achievements": [
            {"time": "1-11 –º—ñ—Å—è—Ü—ñ–≤", "title": "–ù–æ–≤–æ–±—Ä–∞–Ω–µ—Ü—å –ú–æ—Ä—è", "description": "–í–∏—Ç—Ä–∏–º–∞–≤(–ª–∞) –ø–µ—Ä—à—ñ —à—Ç–æ—Ä–º–∏ —Ç–∞ –∑–∞—Å–≤–æ—ó–≤(–ª–∞) –æ—Å–Ω–æ–≤–∏ –º–æ—Ä—Å—å–∫–æ—ó —Å–ø—Ä–∞–≤–∏. –ü–æ–ø–µ—Ä–µ–¥—É —Ü—ñ–ª–∏–π –æ–∫–µ–∞–Ω!"},
            {"time": "1 —Ä—ñ–∫", "title": "–û—Ñ—ñ—Ü–µ—Ä—Å—å–∫–µ –±—Ä–∞—Ç—Å—Ç–≤–æ", "description": "–ó–∞–∫–ª–∞–≤(–ª–∞) —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–æ—ó –∫–∞—Ä'—î—Ä–∏. –í–ø–µ–≤–Ω–µ–Ω–æ —Ç—Ä–∏–º–∞—î—à —Å—Ç—Ä—ñ–π!"},
            {"time": "2 —Ä–æ–∫–∏", "title": "–°—Ç–∞–±—ñ–ª—ñ–∑–∞—Ü—ñ—è –∫–∞—Ç–µ—Ä–∞", "description": "–ü–µ—Ä—à–∏–π —Ä—ñ–∫ ‚Äì –≤–∏–ø—Ä–æ–±—É–≤–∞–Ω–Ω—è, –¥—Ä—É–≥–∏–π ‚Äì –¥–æ—Å–≤—ñ–¥. –¢–∏ —Å—Ç–∞–≤(–ª–∞) –Ω–∞–¥—ñ–π–Ω–æ—é –æ–ø–æ—Ä–æ—é."},
            {"time": "3 —Ä–æ–∫–∏", "title": "–¢–æ—Ä–ø–µ–¥–∞ –¥–æ—Å–≤—ñ–¥—É", "description": "–¢–≤–æ—è –≤–∏—Å–ª—É–≥–∞ –¥–æ–∑–≤–æ–ª—è—î –≤–∏—Ä—ñ—à—É–≤–∞—Ç–∏ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è. –ì–æ—Ç–æ–≤–∏–π(–∞) –¥–æ –∫–æ–º–∞–Ω–¥—É–≤–∞–Ω–Ω—è!"},
            {"time": "4 —Ä–æ–∫–∏", "title": "–ú–∞–π—Å—Ç–µ—Ä –∞–∫–≤–∞—Ç–æ—Ä—ñ—ó", "description": "–¢–∏ –∑–Ω–∞—î—à –∫–∞—Ç–µ—Ä, —è–∫ —Å–≤–æ—é –∫–∏—à–µ–Ω—é, –∞ –º–æ—Ä–µ ‚Äì —è–∫ —Ä—ñ–¥–Ω–∏–π –¥—ñ–º. –ß–∞—Å –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –∑–Ω–∞–Ω–Ω—è."},
            {"time": "5 —Ä–æ–∫—ñ–≤", "title": "–ó–æ–ª–æ—Ç–∏–π —è–∫—ñ—Ä", "description": "5 —Ä–æ–∫—ñ–≤ –±–µ–∑–¥–æ–≥–∞–Ω–Ω–æ—ó —Å–ª—É–∂–±–∏. –ü—Ä–∏–∫–ª–∞–¥ –¥–ª—è –Ω–∞—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è —Ç–∞ —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –ø—Ä–æ—Ñ–µ—Å—ñ–æ–Ω–∞–ª."},
            {"time": "6 —Ä–æ–∫—ñ–≤", "title": "–í–µ—Ç–µ—Ä–∞–Ω –í–æ–¥–Ω–æ—ó –ì–ª–∞–¥—ñ (–§–∞–∑–∞ 1)", "description": "–ü—Ä–æ–π—à–æ–≤(–ª–∞) —á–µ—Ä–µ–∑ –≤–æ–≥–æ–Ω—å —Ç–∞ –≤–æ–¥—É. –¢–≤—ñ–π –¥–æ—Å–≤—ñ–¥ –±–µ–∑—Ü—ñ–Ω–Ω–∏–π –¥–ª—è —Ñ–ª–æ—Ç—É."},
            {"time": "7 —Ä–æ–∫—ñ–≤", "title": "–í–µ—Ç–µ—Ä–∞–Ω –≤–æ–¥–Ω–æ—ó –≥–ª–∞–¥—ñ (–§–∞–∑–∞ 2)", "description": "–ü—Ä–æ–π—à–æ–≤(–ª–∞) —á–µ—Ä–µ–∑ –≤–æ–≥–æ–Ω—å —Ç–∞ –≤–æ–¥—É. –¢–≤—ñ–π –¥–æ—Å–≤—ñ–¥ –±–µ–∑—Ü—ñ–Ω–Ω–∏–π –¥–ª—è —Ñ–ª–æ—Ç—É."},
            {"time": "8 —Ä–æ–∫—ñ–≤", "title": "–ú–æ—Ä—Å—å–∫–∏–π –≤–æ–≤–∫ (–ü–æ—á–∞—Ç–æ–∫)", "description": "–†–æ–∫–∏ —Å–ª—É–∂–±–∏ –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏–ª–∏ —Ç–µ–±–µ –Ω–∞ —Å–ø—Ä–∞–≤–∂–Ω—å–æ–≥–æ –º–æ—Ä—Å—å–∫–æ–≥–æ –≤–æ–≤–∫–∞. –£—Å–ø—ñ—Ö–∏ –≥–æ–≤–æ—Ä—è—Ç—å —Å–∞–º—ñ –∑–∞ —Å–µ–±–µ."},
            {"time": "9 —Ä–æ–∫—ñ–≤", "title": "–ú–æ—Ä—Å—å–∫–∏–π –≤–æ–≤–∫ (–ü—Ä–æ—Ñ—ñ)", "description": "–†–æ–∫–∏ —Å–ª—É–∂–±–∏ –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏–ª–∏ —Ç–µ–±–µ –Ω–∞ —Å–ø—Ä–∞–≤–∂–Ω—å–æ–≥–æ –º–æ—Ä—Å—å–∫–æ–≥–æ –≤–æ–≤–∫–∞. –£—Å–ø—ñ—Ö–∏ –≥–æ–≤–æ—Ä—è—Ç—å —Å–∞–º—ñ –∑–∞ —Å–µ–±–µ."},
            {"time": "10 —Ä–æ–∫—ñ–≤", "title": "–õ—ñ–¥–µ—Ä —Ñ–ª–æ—Ç–∏–ª—ñ—ó (–∑–æ–ª–æ—Ç–æ)", "description": "–î–µ—Å—è—Ç–∏–ª—ñ—Ç—Ç—è –≤—ñ—Ä–Ω–æ—Å—Ç—ñ –ø—Ä–∏—Å—è–∑—ñ. –¢–∏ —î —Ä—É—à—ñ–π–Ω–æ—é —Å–∏–ª–æ—é —Ç–∞ –≥–æ—Ä–¥—ñ—Å—Ç—é –í–ú–° –ó–°–£."},
            {"time": "11 —Ä–æ–∫—ñ–≤", "title": "–õ—ñ–¥–µ—Ä —Ñ–ª–æ—Ç–∏–ª—ñ—ó (–ø–ª–∞—Ç–∏–Ω–∞)", "description": "–î–µ—Å—è—Ç–∏–ª—ñ—Ç—Ç—è –≤—ñ—Ä–Ω–æ—Å—Ç—ñ –ø—Ä–∏—Å—è–∑—ñ. –¢–∏ —î —Ä—É—à—ñ–π–Ω–æ—é —Å–∏–ª–æ—é —Ç–∞ –≥–æ—Ä–¥—ñ—Å—Ç—é –í–ú–° –ó–°–£."},
            {"time": "12 —Ä–æ–∫—ñ–≤", "title": "–õ—ñ–¥–µ—Ä —Ñ–ª–æ—Ç–∏–ª—ñ—ó (–¥—ñ–∞–º–∞–Ω—Ç)", "description": "–î–µ—Å—è—Ç–∏–ª—ñ—Ç—Ç—è –≤—ñ—Ä–Ω–æ—Å—Ç—ñ –ø—Ä–∏—Å—è–∑—ñ. –¢–∏ —î —Ä—É—à—ñ–π–Ω–æ—é —Å–∏–ª–æ—é —Ç–∞ –≥–æ—Ä–¥—ñ—Å—Ç—é –í–ú–° –ó–°–£."},
            {"time": "–í –∞—Ä–º—ñ—ó –Ω–∞—Ä–æ–¥–∏–≤—Å—è", "title": "–ê–±—Å–æ–ª—é—Ç–Ω–∏–π –∞–¥–º—ñ—Ä–∞–ª", "description": "–¢–≤–æ—è –∫–∞—Ä'—î—Ä–∞ –ø–æ—á–∞–ª–∞—Å—è –∑ –∫–æ–ª–∏—Å–∫–∏ –Ω–∞ –ø–∞–ª—É–±—ñ. –°–ø—Ä–∞–≤–∂–Ω—è –ª–µ–≥–µ–Ω–¥–∞!"}
        ],
        "skills_list": [
            {"name": "–†–∞–¥—ñ–æ–µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –±–æ—Ä–æ—Ç—å–±–∞ (–†–ï–ë)", "kkd_boost": 16},
            {"name": "–í–æ–ª–æ–¥—ñ–Ω–Ω—è –ë–ü–õ–ê (–ø—ñ–ª–æ—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ —Ä–æ–∑–≤—ñ–¥–∫–∞)", "kkd_boost": 16},
            {"name": "–ù–∞–¥–∞–Ω–Ω—è –¥–æ–º–µ–¥–∏—á–Ω–æ—ó –¥–æ–ø–æ–º–æ–≥–∏ (–±–æ–π–æ–≤–∏–π –º–µ–¥–∏–∫)", "kkd_boost": 16},
            {"name": "–ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—è —Ç–∞ –∑–∞—Ö–∏—â–µ–Ω–∏–π –∑–≤'—è–∑–æ–∫", "kkd_boost": 16},
            {"name": "–í–æ–¥–æ–ª–∞–∑–Ω–∞ —Å–ø—Ä–∞–≤–∞ (–ª–µ–≥–∫–æ–≤–æ–¥–æ–ª–∞–∑)", "kkd_boost": 16},
            
            // --- –ó–≤'—è–∑–æ–∫ —Ç–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è ---
            {"name": "–ù–∞–≤—ñ–≥–∞—Ü—ñ–π–Ω–∞ –≤–∞—Ö—Ç–∞ (–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç)", "kkd_boost": 16},
            {"name": "–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–∞–¥—ñ–æ—Å—Ç–∞–Ω—Ü—ñ—ó —Ç–∞ –†–õ–° (–ê–†–õ–°)", "kkd_boost": 16},
            {"name": "–ó–Ω–∞–Ω–Ω—è –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—ó (–∑–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º–∏ –ù–ê–¢–û)", "kkd_boost": 16},
            {"name": "–†–æ–±–æ—Ç–∞ –∑ –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏ (–ï–ö–ù–ó)", "kkd_boost": 16},
            {"name": "–°–∏–≥–Ω–∞–ª—å–Ω–∞ —Å–ø—Ä–∞–≤–∞ (–ø—Ä–∞–ø–æ—Ä–∏, —Å–≤—ñ—Ç–ª–æ, Morse)", "kkd_boost": 16},
            
            // --- –û–∑–±—Ä–æ—î–Ω–Ω—è —Ç–∞ –ë–ó–ñ ---
            {"name": "–û–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è —Ç–∞ —Å—Ç—Ä—ñ–ª—å–±–∞ –∑ 30-–º–º –≥–∞—Ä–º–∞—Ç–∏", "kkd_boost": 16},
            {"name": "–û–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è —Ç–∞ —Å—Ç—Ä—ñ–ª—å–±–∞ –∑ –≤–µ–ª–∏–∫–æ–∫–∞–ª—ñ–±–µ—Ä–Ω–∏—Ö –∫—É–ª–µ–º–µ—Ç—ñ–≤", "kkd_boost": 16},
            {"name": "–ë–æ—Ä–æ—Ç—å–±–∞ –∑–∞ –∂–∏–≤—É—á—ñ—Å—Ç—å –∫–æ—Ä–∞–±–ª—è (–ë–ó–ñ) —Ç–∞ –ø–æ–∂–µ–∂–æ–≥–∞—Å—ñ–Ω–Ω—è", "kkd_boost": 16},
            
            // --- –ö–æ–º–∞–Ω–¥—É–≤–∞–Ω–Ω—è —Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±—ñ–≥ ---
            {"name": "–í–µ–¥–µ–Ω–Ω—è —Å–ª—É–∂–±–æ–≤–æ—ó –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó —Ç–∞ —Ñ–æ—Ä–º—É–ª—è—Ä—ñ–≤", "kkd_boost": 16},
            {"name": "–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –æ—Å–æ–±–æ–≤–∏–º —Å–∫–ª–∞–¥–æ–º (–ª—ñ–¥–µ—Ä—Å—Ç–≤–æ)", "kkd_boost": 16},
            {"name": "–ó–Ω–∞–Ω–Ω—è –ö–æ—Ä–∞–±–µ–ª—å–Ω–æ–≥–æ –°—Ç–∞—Ç—É—Ç—É –í–ú–° –ó–°–£", "kkd_boost": 16},

            // --- –î–æ–¥–∞–Ω—ñ –Ω–∞–≤–∏—á–∫–∏ –¥–ª—è –ï–ú–ö (–ï–ª–µ–∫—Ç—Ä–∏–∫–∏, –ú–æ—Ç–æ—Ä–∏—Å—Ç–∏) ---
            {"name": "–†–µ–º–æ–Ω—Ç –¥–∏–∑–µ–ª—å–Ω–∏—Ö –¥–≤–∏–≥—É–Ω—ñ–≤ (–æ—Å–Ω–æ–≤–Ω—ñ –∞–≥—Ä–µ–≥–∞—Ç–∏)", "kkd_boost": 16},
            {"name": "–û–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è —Å—É–¥–Ω–æ–≤–∏—Ö –µ–ª–µ–∫—Ç—Ä–æ—Å–∏—Å—Ç–µ–º (12/24/220–í)", "kkd_boost": 16},
            {"name": "–ö–æ–Ω—Ç—Ä–æ–ª—å –ø–∞–ª–∏–≤–Ω–æ-–º–∞—Å—Ç–∏–ª—å–Ω–∏—Ö —Å–∏—Å—Ç–µ–º —Ç–∞ –Ω–∞—Å–æ—Å—ñ–≤", "kkd_boost": 16},
            {"name": "–†–æ–±–æ—Ç–∞ –∑ –≥–æ–ª–æ–≤–Ω–∏–º —Ä–æ–∑–ø–æ–¥—ñ–ª—å—á–∏–º —â–∏—Ç–æ–º —Ç–∞ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞–º–∏", "kkd_boost": 16},
            {"name": "–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ç–∞ —É—Å—É–Ω–µ–Ω–Ω—è –Ω–µ—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π —Ö–æ–¥–æ–≤–æ—ó —á–∞—Å—Ç–∏–Ω–∏", "kkd_boost": 16}
        ],

        "education_bonus": [
            {"level": "–í–∏—â–∞", "kkd_bonus": 20, "officer_path": true},
            {"level": "–ú–æ–ª–æ–¥—à–∏–π —Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç", "kkd_bonus": 10, "officer_path": false},
            {"level": "–°–µ—Ä–µ–¥–Ω—å–æ-—Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∞", "kkd_bonus": 5, "officer_path": false},
            {"level": "–ó–∞–∫—ñ–Ω—á–∏–≤ 9-11 –∫–ª–∞—Å—ñ–≤", "kkd_bonus": 0, "officer_path": false}
        ]
    };

    // ----------------------------------------------------------------------
    // –§–£–ù–ö–¶–Ü–á –Ü–ù–Ü–¶–Ü–ê–õ–Ü–ó–ê–¶–Ü–á –§–û–†–ú–ò
    // ----------------------------------------------------------------------
    function populateSelects() {
        const serviceTimeSelect = document.getElementById('serviceTime');
        const rankSelect = document.getElementById('rank');
        const positionSelect = document.getElementById('position');
        const educationSelect = document.getElementById('education');
        const skillsContainer = document.getElementById('skillsContainer');

        // 1. –ß–∞—Å —Å–ª—É–∂–±–∏
        db.service_time.forEach(item => {
            serviceTimeSelect.add(new Option(item.display, item.value));
        });

        // 2. –ó–≤–∞–Ω–Ω—è
        db.ranks.forEach(rank => {
            rankSelect.add(new Option(rank.title, rank.id));
        });

        // 3. –ü–æ—Å–∞–¥–∞
        db.positions.forEach(pos => {
            positionSelect.add(new Option(pos, pos));
        });

        // 4. –ù–∞–≤–∏—á–∫–∏ (–ß–µ–∫–±–æ–∫—Å–∏)
        db.skills_list.forEach((skill) => {
            skillsContainer.innerHTML += `
                <label>
                    <input type="checkbox" name="skill" value="${skill.name}" data-kkd="${skill.kkd_boost}">
                    ${skill.name}
                </label>
            `;
        });

        // 5. –û—Å–≤—ñ—Ç–∞
        db.education_bonus.forEach(edu => {
            educationSelect.add(new Option(edu.level, edu.level));
        });
    }
    
    // –ó–∞–ø—É—Å–∫–∞—î–º–æ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é —Ñ–æ—Ä–º–∏ –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è DOM
    document.addEventListener('DOMContentLoaded', () => {
        populateSelects();
        document.getElementById('analysisForm').addEventListener('submit', analyzeStatistics);
    });

    // ----------------------------------------------------------------------
    // –§–£–ù–ö–¶–Ü–Ø –†–û–ó–†–ê–•–£–ù–ö–£ –ß–ê–°–£ –î–û –î–ï–ú–û–ë–Ü–õ–Ü–ó–ê–¶–Ü–á
    // ----------------------------------------------------------------------
    function calculateContractEnd(startDateString) {
        const startDate = new Date(startDateString);
        if (isNaN(startDate)) {
            return { countdown: "–ù–µ–≤—ñ—Ä–Ω–∞ –¥–∞—Ç–∞", note: "–í–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—É –¥–∞—Ç—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É.", status: 0 };
        }

        const today = new Date();
        const contractDurationYears = 3; // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É –¥–ª—è –ø—Ä–∏–∫–ª–∞–¥—É
        const contractEndDate = new Date(startDate);
        contractEndDate.setFullYear(startDate.getFullYear() + contractDurationYears);

        // –í —É–º–æ–≤–∞—Ö –≤–æ—î–Ω–Ω–æ–≥–æ —Å—Ç–∞–Ω—É
        let status = 1;
        let note = "–ü—ñ–¥ —á–∞—Å –≤–æ—î–Ω–Ω–æ–≥–æ —Å—Ç–∞–Ω—É —Ç–µ—Ä–º—ñ–Ω —Å–ª—É–∂–±–∏ —Ç—Ä–∏–≤–∞—î –¥–æ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –¥–µ–º–æ–±—ñ–ª—ñ–∑–∞—Ü—ñ—ó.";
        let countdownText = "–í—ñ–π—Å—å–∫–æ–≤–∏–π —Å—Ç–∞–Ω";
        
        if (today > contractEndDate) {
            note += ` (–ö–æ–Ω—Ç—Ä–∞–∫—Ç –∑–∞–∫—ñ–Ω—á–∏–≤—Å—è ${contractEndDate.toLocaleDateString('uk-UA')})`;
            status = 2; // –ö–æ–Ω—Ç—Ä–∞–∫—Ç –º–∞–≤ –±–∏ –∑–∞–∫—ñ–Ω—á–∏—Ç–∏—Å—è
        } else {
            // –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —á–∞—Å—É –¥–æ –¥–∞—Ç–∏ –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É (—è–∫—â–æ –Ω–µ –í–°)
            const remainingTime = contractEndDate.getTime() - today.getTime();
            const days = Math.floor(remainingTime / (1000 * 60 * 60 * 24));
            const months = Math.floor(days / 30.4375); // –ü—Ä–∏–±–ª–∏–∑–Ω–æ
            const years = Math.floor(months / 12);
            
            const daysRemainder = days % 30.4375;
            const monthsRemainder = months % 12;

            countdownText = `${years} —Ä. ${monthsRemainder.toFixed(0)} –º—ñ—Å. ${daysRemainder.toFixed(0)} –¥–Ω. –¥–æ –∫—ñ–Ω—Ü—è –¥—ñ—ó –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É (—è–∫–±–∏ –Ω–µ –í–°)`;
        }

        return { countdown: countdownText, note: note, status: status };
    }


    // ----------------------------------------------------------------------
    // –û–°–ù–û–í–ù–ê –§–£–ù–ö–¶–Ü–Ø –ê–ù–ê–õ–Ü–ó–£ –°–¢–ê–¢–ò–°–¢–ò–ö–ò
    // ----------------------------------------------------------------------
    function analyzeStatistics(event) {
        event.preventDefault(); // –ó–∞–ø–æ–±—ñ–≥–∞—î–º–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ–π –≤—ñ–¥–ø—Ä–∞–≤—Ü—ñ —Ñ–æ—Ä–º–∏
        
        const serviceTimeValue = document.getElementById('serviceTime').value;
        const rankId = parseInt(document.getElementById('rank').value);
        const educationLevel = document.getElementById('education').value;
        const contractDate = document.getElementById('contractDate').value;
        const selectedSkills = Array.from(document.querySelectorAll('#skillsContainer input[type="checkbox"]:checked'));

        // 1. –†–û–ó–†–ê–•–£–ù–û–ö –ö–ö–î
        let totalKKD = 10; // –ë–∞–∑–æ–≤–∏–π –ö–ö–î
        const educationBonus = db.education_bonus.find(e => e.level === educationLevel);
        if (educationBonus) {
            totalKKD += educationBonus.kkd_bonus;
        }

        selectedSkills.forEach(skill => {
            const boost = parseInt(skill.dataset.kkd);
            totalKKD += boost;
        });
        
        totalKKD = Math.min(100, totalKKD); // –û–±–º–µ–∂–µ–Ω–Ω—è –ö–ö–î –¥–æ 100%

        // 2. –Ü–ù–§–û–†–ú–ê–¶–Ü–Ø –ü–†–û –ó–í–ê–ù–ù–Ø
        const currentRank = db.ranks.find(r => r.id === rankId);
        let nextRank = null;
        let nextRankDisplay = '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–µ –∑–≤–∞–Ω–Ω—è –¥–ª—è –ø–æ—Ç–æ—á–Ω–æ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó.';
        let isOfficerPath = educationBonus ? educationBonus.officer_path : false;
        const rankRecommendations = [];

        if (currentRank) {
            const nextRankId = currentRank.next_rank_id;
            nextRank = db.ranks.find(r => r.id === nextRankId);

            if (nextRank) {
                nextRankDisplay = nextRank.title;
            } else if (currentRank.category === '–°—Ç–∞—Ä—à–∏–Ω–∞' && isOfficerPath) {
                // –ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –ø–µ—Ä–µ—Ö—ñ–¥ –¥–æ –æ—Ñ—ñ—Ü–µ—Ä—Å—å–∫–æ–≥–æ —Å–∫–ª–∞–¥—É
                const mlLeyt = db.ranks.find(r => r.title === '–ú–æ–ª–æ–¥—à–∏–π –ª–µ–π—Ç–µ–Ω–∞–Ω—Ç');
                if (mlLeyt) {
                     nextRankDisplay = `–ü–æ—Ç–µ–Ω—Ü—ñ–∞–ª: ${mlLeyt.title} (–ø–æ—Ç—Ä—ñ–±–Ω–∞ –≤—ñ–π—Å—å–∫–æ–≤–∞ –æ—Å–≤—ñ—Ç–∞)`;
                     rankRecommendations.push("–†–æ–∑–≥–ª—è–Ω—å—Ç–µ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤—Å—Ç—É–ø—É –Ω–∞ –∫—É—Ä—Å–∏ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—ñ–π—Å—å–∫–æ–≤–æ—ó –æ—Å–≤—ñ—Ç–∏ –º–æ–ª–æ–¥—à–æ–≥–æ –æ—Ñ—ñ—Ü–µ—Ä—Å—å–∫–æ–≥–æ —Å–∫–ª–∞–¥—É.");
                }
            }
            
            // –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∑–≤–∞–Ω–Ω—è
            document.getElementById('currentRankDisplay').textContent = currentRank.title;
            const rankImageDiv = document.getElementById('currentRankImage');
            
            // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —î —à–ª—è—Ö –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –∑–≤–∞–Ω–Ω—è
            if (nextRank || isOfficerPath) {
                rankRecommendations.push(`–î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –∑–≤–∞–Ω–Ω—è (${nextRankDisplay}) –ø—Ä–æ–¥–æ–≤–∂—É–π—Ç–µ –ø—ñ–¥–≤–∏—â—É–≤–∞—Ç–∏ —Å–≤—ñ–π –ø—Ä–æ—Ñ–µ—Å—ñ–æ–Ω–∞–ª—ñ–∑–º.`);
            }

            // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–≤–∞–Ω–Ω—è
            if (currentRank.img) {
                rankImageDiv.innerHTML = `<img src="${currentRank.img}" alt="${currentRank.title}">`;
            } else {
                 rankImageDiv.innerHTML = `<div class="placeholder-image">–ó–≤–∞–Ω–Ω—è</div>`;
            }
        }
        document.getElementById('nextRankDisplay').textContent = nextRankDisplay;


        // 3. –ê–ß–Ü–í–ö–ê (–ü–û–î–í–ò–ì–ò)
        const achievement = db.achievements.find(a => a.time === serviceTimeValue);
        if (achievement) {
            document.getElementById('achievementTitle').textContent = achievement.title;
            document.getElementById('achievementDescription').textContent = achievement.description;
        } else {
            document.getElementById('achievementTitle').textContent = '–ê—á—ñ–≤–∫—É –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ';
            document.getElementById('achievementDescription').textContent = '–°–ø—Ä–æ–±—É–π—Ç–µ –≤–∏–±—Ä–∞—Ç–∏ —ñ–Ω—à–∏–π —Ç–µ—Ä–º—ñ–Ω —Å–ª—É–∂–±–∏.';
        }

        // 4. –†–û–ó–†–ê–•–£–ù–û–ö –ö–û–ù–¢–†–ê–ö–¢–£
        const contractInfo = calculateContractEnd(contractDate);
        document.getElementById('contractCountdown').textContent = contractInfo.countdown;
        document.getElementById('contractNote').textContent = contractInfo.note;
        
        // 5. –í–Ü–î–û–ë–†–ê–ñ–ï–ù–ù–Ø –ö–ö–î
        document.getElementById('kkdValue').textContent = `${totalKKD}%`;
        const kkdBar = document.getElementById('kkdBar');
        kkdBar.style.width = `${totalKKD}%`;
        kkdBar.textContent = `${totalKKD}%`;

        // 6. –§–û–†–ú–£–í–ê–ù–ù–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–Ü–ô
        const recommendationList = document.getElementById('recommendationList');
        recommendationList.innerHTML = '';
        
        // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è –ø–æ –ö–ö–î
        if (selectedSkills.length === 0) {
             recommendationList.innerHTML += '<li>**–ó–±—ñ–ª—å—à—Ç–µ —Å–≤—ñ–π –ö–ö–î!** –û–±–µ—Ä—ñ—Ç—å –Ω–∞–≤–∏—á–∫–∏, —è–∫–∏–º–∏ –≤–æ–ª–æ–¥—ñ—î—Ç–µ.</li>';
        } else if (totalKKD < 50) {
            recommendationList.innerHTML += '<li>–í–∞—à –ö–ö–î –Ω–∏–∑—å–∫–∏–π. **–û–ø–∞–Ω—É–π—Ç–µ –±—ñ–ª—å—à–µ –Ω–∞–≤–∏—á–æ–∫** –∑ –ø–µ—Ä–µ–ª—ñ–∫—É, —â–æ–± –±—É—Ç–∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–∏–º.</li>';
        } else if (totalKKD < 80) {
            recommendationList.innerHTML += '<li>–í–∞—à –ö–ö–î —Ö–æ—Ä–æ—à–∏–π, –∞–ª–µ —î –∫—É–¥–∏ —Ä–æ—Å—Ç–∏. –°–ø—Ä–æ–±—É–π—Ç–µ **–æ—Ç—Ä–∏–º–∞—Ç–∏ –Ω–æ–≤—ñ –∫–≤–∞–ª—ñ—Ñ—ñ–∫–∞—Ü—ñ—ó/–Ω–∞–≤–∏—á–∫–∏**.</li>';
        } else {
            recommendationList.innerHTML += '<li>**–§–∞–Ω—Ç–∞—Å—Ç–∏—á–Ω–∏–π –ö–ö–î!** –ü—Ä–æ–¥–æ–≤–∂—É–π—Ç–µ –≤–¥–æ—Å–∫–æ–Ω–∞–ª—é–≤–∞—Ç–∏—Å—å —Ç–∞ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –∑–Ω–∞–Ω–Ω—è –º–æ–ª–æ–¥—à–∏–º.</li>';
        }

        // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è –ø–æ –æ—Å–≤—ñ—Ç—ñ
        if (educationLevel === '–ó–∞–∫—ñ–Ω—á–∏–≤ 9-11 –∫–ª–∞—Å—ñ–≤') {
            recommendationList.innerHTML += '<li>**–ü–æ–¥—É–º–∞–π—Ç–µ –ø—Ä–æ –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –æ—Å–≤—ñ—Ç–Ω—å–æ–≥–æ —Ä—ñ–≤–Ω—è.** –¶–µ –≤—ñ–¥–∫—Ä–∏—î –Ω–æ–≤—ñ –∫–∞—Ä\'—î—Ä–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ.</li>';
        } else if (educationBonus && educationBonus.officer_path && currentRank.category !== '–ú–æ–ª–æ–¥—à–∏–π –æ—Ñ—ñ—Ü–µ—Ä' && currentRank.category !== '–°—Ç–∞—Ä—à–∏–π –æ—Ñ—ñ—Ü–µ—Ä') {
             recommendationList.innerHTML += '<li>–ó –≤–∞—à–æ—é –æ—Å–≤—ñ—Ç–æ—é –≤–∏ –º–∞—î—Ç–µ **–æ—Ñ—ñ—Ü–µ—Ä—Å—å–∫–∏–π –ø–æ—Ç–µ–Ω—Ü—ñ–∞–ª**! –†–æ–∑–≥–ª—è–Ω—å—Ç–µ –Ω–∞–≤—á–∞–Ω–Ω—è —É –í–í–ù–ó.</li>';
        }
        
        // –î–æ–¥–∞—î–º–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –∑—ñ –∑–≤–∞–Ω–Ω—è
        rankRecommendations.forEach(rec => {
             recommendationList.innerHTML += `<li>${rec}</li>`;
        });
        
        // –î–æ–¥–∞—Ç–∫–æ–≤–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è –ø—Ä–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç
        if (contractInfo.status === 2) {
             recommendationList.innerHTML += '<li>**–£–≤–∞–≥–∞!** –ó–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ –∫–∞–¥—Ä–æ–≤–æ—ó —Å–ª—É–∂–±–∏ –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É —É –∑–≤\'—è–∑–∫—É —ñ–∑ –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è–º –π–æ–≥–æ –¥—ñ—ó.</li>';
        }

        // –í–Ü–î–û–ë–†–ê–ñ–ï–ù–ù–Ø –†–ï–ó–£–õ–¨–¢–ê–¢–Ü–í
        document.getElementById('results').style.display = 'block';
        document.getElementById('results').scrollIntoView({ behavior: 'smooth' });

        // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —Ñ–æ–∫—É—Å –Ω–∞ –∫–Ω–æ–ø–∫—É –∞–Ω–∞–ª—ñ–∑—É –¥–ª—è –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
        // document.querySelector('button[type="submit"]').focus(); 
    }

</script>
</body>
</html>
